<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Arbitrage Monitor</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  table { border-collapse: collapse; margin: 20px 0; width: 100%; }
  th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
  th { background: #eee; }
  .profit-pos { color: green; font-weight: bold; }
  .profit-neg { color: red; font-weight: bold; }
</style>
</head>
<body>
<h1>ðŸ“Š Arbitrage Monitor</h1>
<table id="table">
  <thead>
    <tr>
      <th>Ð¢Ð¾ÐºÐµÐ½</th>
      <th>ODOS Ñ†ÐµÐ½Ð°</th>
      <th>MEXC Ñ†ÐµÐ½Ð°</th>
      <th>Ð¡Ð¿Ñ€ÐµÐ´ (%)</th>
      <th>ÐŸÑ€Ð¸Ð±Ñ‹Ð»ÑŒ (USDT)</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
async function loadPrices() {
  const res = await fetch("/prices");
  const data = await res.json();
  const tbody = document.querySelector("#table tbody");
  tbody.innerHTML = "";
  for (const token in data.odos) {
    const odos = data.odos[token] ? data.odos[token].toFixed(6) : "-";
    const mexc = data.mexc[token] ? data.mexc[token].toFixed(6) : "-";
    const spread = data.spread[token] ? data.spread[token].toFixed(2) : "-";
    let profit = "-";
    if (data.profit[token] != null) {
      profit = data.profit[token] > 0
        ? `<span class="profit-pos">+${data.profit[token].toFixed(4)}</span>`
        : `<span class="profit-neg">${data.profit[token].toFixed(4)}</span>`;
    }
    tbody.innerHTML += `
      <tr>
        <td>${token}</td>
        <td>${odos}</td>
        <td>${mexc}</td>
        <td>${spread}</td>
        <td>${profit}</td>
      </tr>
    `;
  }
}

loadPrices();
setInterval(loadPrices, 5000);
</script>
</body>
</html>
